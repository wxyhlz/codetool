<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ProjectColumnInfo">
	<typeAlias alias="projectcolumnInfo" type="com.syscore.generate.table.model.ProjectColumnInfo" />
	<resultMap id="projectcolumnResult" class="com.syscore.generate.table.model.ProjectColumnInfo">
		<!-- ID -->
		<result property="id" column="id" />
		<!-- 排序 -->
		<result property="ordernum" column="ordernum" />
		<!-- 主表id -->
		<result property="pid" column="pid" />
		<!-- 列名 -->
		<result property="colname" column="colname" />
		<!-- java属性 -->
		<result property="javacolname" column="javacolname" /> 
		<!-- 列注释 -->
		<result property="colcomment" column="colcomment" />
		<!-- 列类型 -->
		<result property="coltype" column="coltype" />
		<!-- JAVA类型 -->
		<result property="javatype" column="javatype" />
	</resultMap>

	<!-- 数据添加 -->
	<insert id="insert" parameterClass="projectcolumnInfo">
	    <![CDATA[  
	    	insert into s_projectcolumn(
				id
				,ordernum
				,pid
				,colname
				,javacolname
				,colcomment
				,coltype
				,javatype
			)
			values(
				#id#
				,#ordernum#
				,#pid#
				,#colname#
				,#javacolname#
				,#colcomment#
				,#coltype#
				,#javatype#
			)
		]]>
	</insert>

	<!-- 数据删除 -->
	<delete id="delete" parameterClass="projectcolumnInfo">
		delete from s_projectcolumn 
		<dynamic prepend="where">
			<isNotEmpty  property="id" prepend="and">
	              id = #id#
	        </isNotEmpty >
			<isNotEmpty  property="pid" prepend="and">
	              pid = #pid#
	        </isNotEmpty >  
       	</dynamic>
    </delete>

		<!-- 数据查询 -->
	<select id="selectByMap" parameterClass="map" resultMap="projectcolumnResult" >
		select * from s_projectcolumn
		<dynamic prepend="where">
			<isNotEmpty  property="pid" prepend="and">
	              pid = #pid#
	        </isNotEmpty >  
       	</dynamic> 
		order by ordernum
	</select>
	
	<resultMap id="columnsMap" class="com.syscore.generate.table.dto.ColumnsDto">
		<result property="column_name" column="column_name"/>
		<result property="data_type" column="data_type"/>
		<result property="column_comment" column="column_comment"/>
	</resultMap>
	
	<select id="selectColumns" parameterClass="map" resultMap="columnsMap" > 
		select  column_name, data_type, column_comment  
		from information_schema.columns 
		where table_schema = #databasename#  
			and table_name = #tablename# 
			
<!--		select t.column_name as  column_name,t.data_type as data_type,a.comments as column_comment -->
<!--		from all_tab_columns t, user_col_comments a  -->
<!--		where t.table_name = #tablename# -->
<!--			and t.table_name = a.table_name -->
<!--			and t.column_name = a.column_name-->
<!--			and t.OWNER = 'PLFX'-->
	
	</select>

</sqlMap>
