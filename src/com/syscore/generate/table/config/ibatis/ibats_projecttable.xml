<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ProjectTableInfo">
	<typeAlias alias="projecttableInfo" type="com.syscore.generate.table.model.ProjectTableInfo" />
	<resultMap id="projecttableResult" class="com.syscore.generate.table.model.ProjectTableInfo">
		<!-- ID -->
		<result property="id" column="id" />
		<!-- 所属项目id -->
		<result property="prjid" column="prjid"/>
		<!-- 表名 -->
		<result property="tblname" column="tblname" />
		<!-- 表注释 -->
		<result property="tblcomment" column="tblcomment" />
		<!-- 包 -->
		<result property="pkgmodelpath" column="pkgmodelpath" />
		<!-- 实体类 -->
		<result property="entityclass" column="entityclass" />
		<!-- 作者 -->
		<result property="author" column="author" />
		<!-- 登记时间 -->
		<result property="regtime" column="regtime" />
	</resultMap>  

	<!-- 数据添加 -->
	<insert id="insert" parameterClass="projecttableInfo">
	    <![CDATA[	
	    	insert into s_projecttable(
				id
				,prjid
				,tblname
				,tblcomment
				,pkgmodelpath
				,entityclass
				,author
				,regtime
			)
			values(
				#id#
				,#prjid#
				,#tblname#
				,#tblcomment#
				,#pkgmodelpath#
				,#entityclass#
				,#author#
				,#regtime#
			)
		]]>
	</insert>

	<!-- 数据删除 -->
	<delete id="delete" parameterClass="projecttableInfo">
		<![CDATA[
			delete from s_projecttable where id = #id#
		]]>
    </delete>

	<!-- 数据修改 -->
	<update id="update" parameterClass="projecttableInfo">
		<![CDATA[
			update s_projecttable set
				prjid = #prjid# 
				,tblname = #tblname#
				,pkgmodelpath = #pkgmodelpath#
				,entityclass = #entityclass#
				,author = #author#
			where id = #id#
		]]>
	</update>

	<!-- 查询 -->
	<select id="selectEntity" parameterClass="projecttableInfo" resultMap="projecttableResult" >
		select * from s_projecttable
		<dynamic prepend="where">
			<isNotEmpty  property="tblname" prepend="and">
	              tblname = #tblname#
	        </isNotEmpty >  
	        <isNotEmpty  property="prjid" prepend="and">
	              prjid = #prjid#
	        </isNotEmpty > 
       	</dynamic> 
	</select>
	
	<!-- 数据查询 -->
	<select id="selectByMap" parameterClass="map" resultMap="projecttableResult" >
		<![CDATA[
			select * from s_projecttable
			order by regtime desc
		]]>
	</select>
	
	<!-- 分页查询总记录数 -->
  	<select id="selectPageCount" parameterClass="map" resultClass="Integer" >
		<![CDATA[
			select count(*) from s_projecttable
		]]>
	</select>

	<!-- 分页查询数据 -->
	<select id="selectPage" parameterClass="map" resultMap="projecttableResult" >
		select * from s_projecttable
		order by regtime desc
		limit  #pageBegin#,#pageSize#
<!--		select * from (-->
<!--				select a.*,rownum row_num from (-->
<!--						select * from s_projecttable t order by regtime desc-->
<!--					) a-->
<!--			) b-->
<!--		where b.row_num between $pageBegin$ and $pageEnd$-->
<!--		order by regtime desc-->
	</select>
	
	<!-- new add 获取表注释 -->
	<select id="selectTableComment" parameterClass="map" resultClass="String" >
		select table_comment from information_schema.tables  
		where table_schema = #databasename# and table_name = #tablename#
		 
<!--	oracle:	select t.comments from user_tab_comments t where t.table_name=#tablename# -->
	</select>
	
	<!-- 判断表是否存在 -->
	<select id="selectIsTable" parameterClass="map" resultClass="String" > 
		select table_name from user_tables where table_name = #tablename#
	</select>
	
	
	

</sqlMap>
