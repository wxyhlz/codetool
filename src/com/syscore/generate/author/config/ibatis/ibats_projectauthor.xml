<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ProjectauthorInfo">
	<typeAlias alias="projectauthorInfo" type="com.syscore.generate.author.model.ProjectauthorInfo" />
	<resultMap id="projectauthorResult" class="com.syscore.generate.author.model.ProjectauthorInfo">
		<!-- ID -->
		<result property="id" column="id" />
		<!-- 项目id -->
		<result property="prjid" column="prjid"/>
		<!-- 昵称 -->
		<result property="nickname" column="nickname" />
		<!-- 姓名 -->
		<result property="name" column="name" />
		<!-- 文件路径 -->
		<result property="filepath" column="filepath"/>
		<!-- 登记时间 -->
		<result property="regtime" column="regtime" />
	</resultMap> 

	<!-- 数据添加 -->
	<insert id="insert" parameterClass="projectauthorInfo">
	    <![CDATA[
	    	insert into s_projectauthor(
				id
				,prjid
				,nickname
				,name
				,filepath
				,regtime
			)
			values(
				#id#
				,#prjid#
				,#nickname#
				,#name#
				,#filepath#
				,#regtime#
			)
		]]>
	</insert>

	<!-- 数据删除 -->
	<delete id="delete" parameterClass="projectauthorInfo">
		<![CDATA[
			delete from s_projectauthor where id = #id#
		]]>
    </delete>

	<!-- 数据修改 -->
	<update id="update" parameterClass="projectauthorInfo">
		<![CDATA[
			update s_projectauthor set
				prjid = #prjid#
				,nickname = #nickname#
				,name = #name#
				,filepath = #filepath# 
			where id = #id#
		]]>
	</update>
	
	<!-- 查询数据 -->
	<select id="selectEntity" parameterClass="projectauthorInfo" resultMap="projectauthorResult" >
		select * from s_projectauthor
		<dynamic prepend="where">
			<isNotEmpty  property="name" prepend="and">
	              name = #name#
	        </isNotEmpty >
	        <isNotEmpty  property="nickname" prepend="and">
	              nickname = #nickname#
	        </isNotEmpty > 
	        <isNotEmpty  property="prjid" prepend="and">
	              prjid = #prjid#
	        </isNotEmpty >
       	</dynamic>
		
	</select>

	<!-- 分页查询总记录数 -->
  	<select id="selectPageCount" parameterClass="map" resultClass="Integer" >
		<![CDATA[
			select count(*) from s_projectauthor
		]]>
	</select>

	<!-- 分页查询数据 -->
	<select id="selectPage" parameterClass="map" resultMap="projectauthorResult" >

			select * from s_projectauthor
			<dynamic prepend="where">
				<isNotEmpty  property="prjid" prepend="and">
		              prjid = #prjid#
		        </isNotEmpty > 
	       	</dynamic>
			
			order by regtime desc limit  #pageBegin#,#pageSize#
			
<!-- Oracle: -->		 
<!--		select * from (-->
<!--				select a.*,rownum row_num from (-->
<!--						select * from s_projectauthor t-->
<!--					) a-->
<!--			) b-->
<!--		where b.row_num between $pageBegin$ and $pageEnd$-->
<!--		order by regtime-->
		
	</select>

</sqlMap>
