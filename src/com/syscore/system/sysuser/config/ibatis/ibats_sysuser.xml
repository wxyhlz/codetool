<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="SysuserInfo">
	<typeAlias alias="sysuserInfo" type="com.syscore.system.sysuser.model.SysuserInfo" />
	<resultMap id="sysuserResult" class="com.syscore.system.sysuser.model.SysuserInfo">
		<!-- ID -->
		<result property="id" column="id" />
		<!-- 部门 -->
		<result property="dpid" column="dpid" />
		<!-- 部门层结构 -->
		<result property="dpids" column="dpids" />
		<!-- 工号 -->
		<result property="code" column="code" />
		<!-- 姓名 -->
		<result property="name" column="name" />
		<!-- 密码 -->
		<result property="password" column="password" /> 
		<!-- 默认 1；0 无效 ；1 有效 -->
		<result property="valid" column="valid" />
	</resultMap>

	<!-- 数据添加 -->
	<insert id="insert" parameterClass="sysuserInfo">
	    <![CDATA[ 
	    	insert into s_sysuser(
				id
				,dpid
				,dpids
				,code
				,name
				,password 
				,valid
			)
			values(
				#id#
				,#dpid#
				,#dpids#
				,#code#
				,#name#
				,#password# 
				,#valid#
			)
		]]>
	</insert>

	<!-- 数据删除 -->
	<delete id="delete" parameterClass="sysuserInfo">
		<![CDATA[
			delete from s_sysuser where id = #id#
		]]>
    </delete>

	<!-- 数据修改 -->
	<update id="update" parameterClass="sysuserInfo">
		<![CDATA[
			update s_sysuser set
				id = #id#
				,dpid = #dpid#
				,dpids = #dpids#
				,code = #code#
				,name = #name#
				,password = #password# 
				,valid = #valid#
			where id = #id#
		]]>
	</update>
	
	<!-- 数据查询 -->
	<select id="selectEntity" parameterClass="sysuserInfo" resultMap="sysuserResult" >
		select * from s_sysuser
		<dynamic prepend="where">
			<isNotEmpty  property="code" prepend="and">
	              code = #code#
	        </isNotEmpty > 
	        <isNotEmpty  property="password" prepend="and">
	              password = #password#
	        </isNotEmpty >
	        <isNotEmpty  property="valid" prepend="and">
	              valid = #valid#
	        </isNotEmpty >  
       	</dynamic> 	
	</select>
	
	<!-- 数据查询 -->
	<select id="selectByMap" parameterClass="map" resultMap="sysuserResult" >
			select * from s_sysuser
			<dynamic prepend="where">
				<isNotEmpty  property="dpid" prepend="and">
		              dpid = #dpid#
		        </isNotEmpty > 
		        <isNotEmpty  property="dpids" prepend="and">
		              dpids like concat('%',#dpids#,'%')
		        </isNotEmpty >  
	       	</dynamic> 	
			order by code
	</select>

	<!-- 分页查询总记录数 -->
  	<select id="selectPageCount" parameterClass="map" resultClass="Integer" >
		<![CDATA[
			select count(*) from s_sysuser
		]]>
	</select>

	<!-- 分页查询数据 -->
	<select id="selectPage" parameterClass="map" resultMap="sysuserResult" >
		select * from (
				select a.*,rownum row_num from (
						select * from s_sysuser t
					) a
			) b
		where b.row_num between $pageBegin$ and $pageEnd$
		order by code
	</select>

</sqlMap>
